<?xml version="1.0" encoding="UTF-8" ?>
<ruleset name="Customized-PSR2">
  <description>A custom coding standard</description>

  <ini name="memory_limit" value="-1"/>
  <arg name="extensions" value="php"/>
  <arg value="sp"/>
    
  <file>.</file>
  <exclude-pattern>*/bin/</exclude-pattern>
  <exclude-pattern>*/data/</exclude-pattern>
  <exclude-pattern>*/doc/</exclude-pattern>
  <exclude-pattern>*/docker/</exclude-pattern>
  <exclude-pattern>*/node_modules/</exclude-pattern>
  <exclude-pattern>*/resources/</exclude-pattern>
  <exclude-pattern>*/runtime/</exclude-pattern>
  <exclude-pattern>*/vendor/</exclude-pattern>
  <exclude-pattern>*/views/</exclude-pattern>

  <rule ref="PSR12" />

  <!--rule ref="Generic.Commenting.Fixme"/-->
  <!--rule ref="Generic.Commenting.Todo"/-->

  <rule ref="Generic.NamingConventions.UpperCaseConstantName"/>
  <rule ref="PSR2.ControlStructures.ElseIfDeclaration.NotAllowed">
    <type>error</type>
  </rule>
  <rule ref="PEAR.Commenting.InlineComment"/>
  <rule ref="Generic.Arrays.ArrayIndent"/>
  <rule ref="Generic.Arrays.DisallowLongArraySyntax"/>
  <rule ref="Generic.CodeAnalysis.EmptyStatement">
    <exclude name="Generic.CodeAnalysis.EmptyStatement.DetectedCatch"/>
  </rule>
  <rule ref="Generic.CodeAnalysis.UnnecessaryFinalModifier"/>
  <rule ref="Generic.Formatting.NoSpaceAfterCast"/>
  <rule ref="Generic.NamingConventions.ConstructorName"/>
  <rule ref="Generic.PHP.CharacterBeforePHPOpeningTag"/>
  <rule ref="Generic.PHP.BacktickOperator"/>
  <rule ref="Generic.PHP.SAPIUsage"/>
  <rule ref="Generic.PHP.DeprecatedFunctions"/>
  <rule ref="Generic.PHP.ForbiddenFunctions">
    <properties>
      <property name="forbiddenFunctions" type="array">
        <element key="d" value="null"/>
        <element key="dd" value="null"/>
        <element key="doubleval" value="floatval"/>
        <element key="dump" value="null"/>
        <element key="dump_d" value="null"/>
        <element key="empty" value="null"/>
        <element key="is_double" value="is_float"/>
        <element key="is_integer" value="is_int"/>
        <element key="is_long" value="is_int"/>
        <element key="is_real" value="is_float"/>
        <element key="var_dump" value="null"/>
      </property>
    </properties>
  </rule>
  <rule ref="Generic.PHP.DiscourageGoto"/>
  <rule ref="Generic.VersionControl.GitMergeConflict"/>
  <rule ref="SlevomatCodingStandard.Arrays.TrailingArrayComma"/>
  <rule ref="SlevomatCodingStandard.Arrays.SingleLineArrayWhitespace"/>
  <rule ref="SlevomatCodingStandard.Functions.RequireArrowFunction"/>
  <rule ref="SlevomatCodingStandard.Classes.ClassConstantVisibility"/>
  <rule ref="SlevomatCodingStandard.Classes.EmptyLinesAroundClassBraces">
    <properties>
      <property name="linesCountAfterOpeningBrace" value="0"/>
      <property name="linesCountBeforeClosingBrace" value="0"/>
    </properties>
    <exclude name="SlevomatCodingStandard.Classes.EmptyLinesAroundClassBraces.IncorrectEmptyLinesBeforeClosingBrace"/>
  </rule>
  <rule ref="SlevomatCodingStandard.Classes.ModernClassNameReference"/>
  <rule ref="SlevomatCodingStandard.Classes.TraitUseDeclaration"/>
  <rule ref="SlevomatCodingStandard.Classes.TraitUseSpacing">
    <properties>
      <property name="linesCountAfterLastUse" value="1"/>
      <property name="linesCountAfterLastUseWhenLastInClass" value="0"/>
      <property name="linesCountBeforeFirstUse" value="0"/>
      <property name="linesCountBetweenUses" value="0"/>
    </properties>
  </rule>
  <rule ref="SlevomatCodingStandard.Commenting.EmptyComment"/>
  <rule ref="SlevomatCodingStandard.Commenting.InlineDocCommentDeclaration"/>
  <rule ref="SlevomatCodingStandard.Commenting.UselessInheritDocComment"/>
  <rule ref="SlevomatCodingStandard.ControlStructures.DisallowYodaComparison"/>

  <rule ref="PSR12">
    <file>*/components/ability/effect/*</file>
    <exclude name="Squiz.Classes.ValidClassName.NotCamelCaps" />
  </rule>

  <rule ref="PSR12">
    <file>*/migrations/*</file>
    <exclude name="Squiz.Classes.ValidClassName.NotCamelCaps" />
    <exclude name="PSR1.Classes.ClassDeclaration" />
  </rule>

  <rule ref="PSR12">
    <file>*/messages/*</file>
    <exclude name="Generic.Files.LineLength" />
  </rule>
</ruleset>

<?xml version="1.0" encoding="UTF-8" ?>
<ruleset name="Customized-PSR2">
  <description>A custom coding standard</description>

  <ini name="memory_limit" value="-1"/>
  <arg name="extensions" value="php"/>
  <arg value="sp"/>
    
  <file>.</file>
  <exclude-pattern>*/bin/</exclude-pattern>
  <exclude-pattern>*/data/</exclude-pattern>
  <exclude-pattern>*/doc/</exclude-pattern>
  <exclude-pattern>*/docker/</exclude-pattern>
  <exclude-pattern>*/node_modules/</exclude-pattern>
  <exclude-pattern>*/resources/</exclude-pattern>
  <exclude-pattern>*/runtime/</exclude-pattern>
  <exclude-pattern>*/vendor/</exclude-pattern>
  <exclude-pattern>*/views/</exclude-pattern>

  <rule ref="PSR12" />

  <!--rule ref="Generic.Commenting.Fixme"/-->
  <!--rule ref="Generic.Commenting.Todo"/-->

  <!-- Constants must be all uppercase. -->
  <rule ref="Generic.NamingConventions.UpperCaseConstantName"/>

  <!-- Disallow 'else if' in favor of 'elseif' (increase PSR12 severity level from warning to error) -->
  <rule ref="PSR2.ControlStructures.ElseIfDeclaration.NotAllowed">
  <type>error</type>
  </rule>

  <!-- Forbid comments starting with # -->
  <rule ref="PEAR.Commenting.InlineComment"/>

  <!-- Force array element indentation with one tab stop -->
  <rule ref="Generic.Arrays.ArrayIndent"/>

  <!-- Forbid 'array(...)' -->
  <rule ref="Generic.Arrays.DisallowLongArraySyntax"/>

  <!-- Forbid empty statements -->
  <rule ref="Generic.CodeAnalysis.EmptyStatement">
  <!-- But allow empty catch -->
  <exclude name="Generic.CodeAnalysis.EmptyStatement.DetectedCatch"/>
  </rule>

  <!-- Forbid final methods in final classes -->
  <rule ref="Generic.CodeAnalysis.UnnecessaryFinalModifier"/>

  <!-- Force whitespace after a type cast -->
  <rule ref="Generic.Formatting.NoSpaceAfterCast"/>

  <!-- Forbid PHP 4 constructors -->
  <rule ref="Generic.NamingConventions.ConstructorName"/>

  <!-- Forbid any content before opening tag -->
  <rule ref="Generic.PHP.CharacterBeforePHPOpeningTag"/>

  <!-- Forbid backtick operator -->
  <rule ref="Generic.PHP.BacktickOperator"/>

  <!-- Forbid 'php_sapi_name()' function, use PHP_SAPI -->
  <rule ref="Generic.PHP.SAPIUsage"/>

  <!-- Forbid deprecated functions -->
  <rule ref="Generic.PHP.DeprecatedFunctions"/>

  <rule ref="PSR12">
    <file>*/components/ability/effect/*</file>
    <exclude name="Squiz.Classes.ValidClassName.NotCamelCaps" />
  </rule>

  <rule ref="PSR12">
    <file>*/migrations/*</file>
    <exclude name="Squiz.Classes.ValidClassName.NotCamelCaps" />
    <exclude name="PSR1.Classes.ClassDeclaration" />
  </rule>

  <rule ref="PSR12">
    <file>*/messages/*</file>
    <exclude name="Generic.Files.LineLength" />
  </rule>
</ruleset>
